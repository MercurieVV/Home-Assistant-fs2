version = "3.8.6"
runner.dialect = scala3

# ── Column & Indent ──────────────────────────────────────────────
maxColumn = 80
indent.main = 2
indent.callSite = 2
indent.defnSite = 2
indent.ctrlSite = 2

# ── Alignment (smart tabulation) ─────────────────────────────────
align.preset = more
align.openParenCallSite = true
align.openParenDefnSite = true
align.tokens."+" = [
  { code = "-->", owner = "Term.ApplyInfix" }
  { code = "=",   owner = "Term.Assign" }
  { code = "<-",  owner = "Enumerator.Generator" }
  { code = "->",  owner = "Term.ApplyInfix" }
  { code = "%",   owner = "Term.ApplyInfix" }
  { code = "%%",  owner = "Term.ApplyInfix" }
  { code = "%%%", owner = "Term.ApplyInfix" }
  { code = ":=",  owner = "Term.ApplyInfix" }
  { code = "+=",  owner = "Term.ApplyInfix" }
  { code = "++=", owner = "Term.ApplyInfix" }
]

# ── Newlines & Blank Lines (block grouping) ──────────────────────
newlines.topLevelStatementBlankLines = [
  { blanks { before = 1 } }
]
newlines.beforeMultiline = keep
newlines.afterCurlyLambdaParams = keep
newlines.implicitParamListModifierPrefer = before

# ── Trailing Commas ──────────────────────────────────────────────
trailingCommas = always

# ── Params: one per line, closing delim on own line ──────────────
verticalMultiline.atDefnSite = true
verticalMultiline.arityThreshold = 2
verticalMultiline.newlineAfterOpenParen = true

danglingParentheses.defnSite = true
danglingParentheses.callSite = true
danglingParentheses.ctrlSite = true
danglingParentheses.tupleSite = true

# ── Rewrites (imports handled by scalafix OrganizeImports) ───────
rewrite.rules = [RedundantBraces, RedundantParens, PreferCurlyFors]

# ── Miscellaneous ────────────────────────────────────────────────
optIn.configStyleArguments = true
runner.optimizer.forceConfigStyleOnOffset = 80